<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="typography.css">
    <link rel="stylesheet" type="text/css" href="button.css">
	<link rel="stylesheet" type="text/css" href="CodeMirror/lib/codemirror.css">
	<script src="CodeMirror/lib/codemirror.js" type="text/javascript"></script>
	<script src="CodeMirror/mode/scheme/scheme.js" type="text/javascript"></script>
	<link rel="stylesheet" type="text/css" href="CodeMirror/theme/eclipse.css">
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'>
    <script src="hash.js" type="text/javascript"></script>
    <script src="simplescheme.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
    <meta name="author" content="Mike Vollmer, http://recurial.com">
    <title>simplescheme.js</title>
    
    <script type="text/javascript">
$(function() {
  $('#input').submit(function(e) {
    var input_text = $('#input_text').val()
    var output_array = parse(input_text);
    var output_text = '';
    $.each(output_array, function(index, value) {
      output_text += value + "<br>";
    });
    $('#output').html(output_text);
    e.preventDefault();
    return false;
  });
});
    </script>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1325016-10']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

    </script>
    <style  type="text/css">#output { height: 300px; overflow:auto; }</style>
  </head>

  <body>
    <div style="width: 790px; padding: 15px; margin-left: auto; margin-right: auto;">
      <h1>simplescheme.js</h1>
      <h3>A minimal LISP interpreter written in Javascript.</h3>
      <p>This is a simple <a href="http://en.wikipedia.org/wiki/Lisp_%28programming_language%29">LISP</a>
	  interpreter I wrote for Javascript. 
      It supports lambda functions and a few primitive operations 
      (read the source or the readme for more information).</p>
      <p>This page is an example use of simplescheme.js: it takes 
      the scheme code written in the left-hand box, and (once the
      <em>eval</em> button is pressed) interprets it and prints the
      result in the right-hand panel.</p>
      <p>For more info (and the source code) for simplescheme.js,
      <a href="https://github.com/probabilityZero/simplescheme.js"
      title="simplescheme.js on github">look it up on Github</a>.
      <div style="width: 435px; float: left;">
        <h2>Input</h2>
        <form id="input" action="javascript: return false;">
          <textarea rows="20" cols="55" id="input_text" style="font-family: 'Droid Sans Mono', 'Courier New', Courier, monospace;">
; factorial
(define fact (lambda (n)
  (if (<= n 1) 1
  (* n (fact (- n 1))))))

(fact 10)

; tail factorial
(define helper-fact (lambda (x y)
    (if (= x 0) y
        (helper-fact (- x 1) (* x y)))))
(define tail-fact (lambda (n)
  (helper-fact n 1)))
  
(= (tail-fact 10) (fact 10))

(tail-fact 100)


; higher order functions
(define adder (lambda (x)
  (lambda (y) (+ x y)))) ; return lambda function

((adder 5) 5)

(define (map-func proc lis)
   (cond ((null? lis) (quote))
         (#t (cons (proc (car lis))
                   (map-func proc (cdr lis))))))
(define (square x) (* x x))
(map-func square '(2 3 4))

; compute length of a list
(define len (lambda (L)
  (if (null? L) 0
      (+ 1 (len (cdr L))))))

(len '(1 2 3))
(len (quote 1 2 3 (4 5)))


; misc. stuff

(define degrees-to-radians (lambda (x)
  (* x (/ PI 180))))

(= (sin (degrees-to-radians 90))
   (cos (degrees-to-radians 0)))

(list 1 2 3) ; list accepts n arguments

; quote can make symbols
(quote the end of the world)

; cond is transformed into a nested if
(cond ((= 1 2) (quote nope))
      ((= 1 1) (quote yes)))

(define isinlist (lambda (L a)
  (if (null? L) #f
      (if (= a (car L)) #t
          (isinlist (cdr L) a)))))

(isinlist (quote 1 2 3) 2)
(isinlist (quote 1 2 3) 4)

; boolean operations
(and #t #f) ; false
(and #t (or #t #f)) ; true

          </textarea>
          <input class="g-button" type="submit" value="eval">
        </form>
      </div>
      <div style="width: 350px; float: right;">
        <h2>Output</h2>
        <pre id="output" style="font-family: 'Droid Sans Mono', 'Courier New', Courier, monospace;"></pre>
      </div>
      <div style="clear:both;"></div>
      <footer style="margin-top:15px;">
        <hr>
        <p style="text-align:center;">Created by <strong><a href="http://recurial.com" title="My blog">Mike Vollmer</a></strong>. All code is open source under the <a href="http://www.gnu.org/copyleft/gpl.html" title="General Public License">GPL</a>.</p>
      </footer>
    </div>
    <script>
var editor = CodeMirror.fromTextArea(document.getElementById("input_text"), {
  mode: "text/x-scheme",
  lineNumbers: true,
  matchBrackets: true,
  theme: 'eclipse'
});
	</script>
  </body>
</html> 
